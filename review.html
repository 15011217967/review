<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    html{
      width: 100%;
      height: 100%;
      background: url(img/52.jpg) no-repeat;
      background-size: 100%;
    }
    .review{
      width: 700px;
      font-size: 30px;  
      line-height: 55px;
      margin:180px auto;
      color: #fff;
      position: relative;
      letter-spacing: 10px;
    }
    .review span{
      display: inline-block;
      color: #FFF;
      background-color: #409EFF;
      border-color: #409EFF;
      display: inline-block;
      line-height: 1;
      white-space: nowrap;
      cursor: pointer;
      -webkit-appearance: none;
      text-align: center;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      outline: 0;
      -webkit-transition: .1s;
      transition: .1s;
      font-weight: 500;
      -moz-user-select: none;
      padding: 12px 20px;
      font-size: 14px;
      border-radius: 4px;
      position: absolute;
      bottom: -200px;
      right: -130px;
    }
    .review span:hover{
      background: rgb(120, 161, 202);
    }
    .textIndex{
      color: red;
    }
    .sum{
      position: absolute;
      top: -150px;
      right: -150px;
      font-size: 18px;
      line-height: 30px;
      color: #fff;
    }
    .text{
      padding-top: 77px;
    }
    strong{
      font-size: 30px;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="review">
      <p class="text" :class="{textIndex : textIndex == '完成'}">{{ textIndex == '完成' ? '恭喜少侠，已经完成全部题目，点击确定后，进入下一轮复习！' : data[textIndex] }}</p>
      <span @click="reviewNext">{{ textIndex == '完成' ? '下一轮' : '下一题' }}</span>
      <div class="sum">
        <div>题目总数：<strong>{{ this.sumData.length }}</strong></div>
        <div>已完成数量：<strong>{{ this.sumData.length - this.data.length }}</strong></div>
        <div>未完成数量：<strong>{{ this.data.length }}</strong></div>
      </div>
    </div>
  </div>
</body>
  <!-- js基本 -->
  <script src="js/Base.js"></script> 
  <!-- 数组相关 -->
  <script src="js/Array.js"></script>
  <!-- 字符串相关 -->
  <script src="js/String.js"></script>
  <!-- 正则相关 -->
  <script src="js/Regular.js"></script>
  <!-- Vue -->
  <script src="js/vue.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: {
        // 全部题目
        sumData:[],
        // 当前题目
        data:[],
        // 题目，文本
        text: null,
        // 题目，文本 index
        textIndex:null,
        // 题目总数
        sum:null,
        // 已完成题目数量
        sumAlready:null,
        // 未完成题目数量
        sumNo:null,
      },
      created() {
        // 合并数据
        this.mergeData();
        // 初始化数据，逻辑处理
        this.info();
      },
      methods: {
        // 合并数据
        mergeData() {
          var localStorage = window.localStorage;
          this.sumData = [...base, ...array, ...string, ...regular,];
          this.sum = this.sumData.length;

          if(localStorage.getItem('data')) {
            this.data = JSON.parse(localStorage.getItem('data'));
          }else{
            this.data = JSON.parse(JSON.stringify(this.sumData));
            localStorage.setItem('data',JSON.stringify(this.data));
          }
        },
        // 初始化
        info() {
          this.textIndex = this.rnd(this.data.length);
          console.log(this.data[this.textIndex])
        },
        // 下一题
        reviewNext() {
          if(!(this.data && this.data.length)) {
            alert('恭喜少侠，已经完成全部题目，点击确定后，进入下一轮复习！');
            localStorage.setItem('data',JSON.stringify(this.sumData));
            this.data = JSON.parse(JSON.stringify(this.sumData));
            this.textIndex = this.rnd(this.data.length);
            return;
          };
          this.data.splice(this.textIndex,1);
          if(this.data && this.data.length > 0) {
            localStorage.setItem('data',JSON.stringify(this.data));
            this.textIndex = this.rnd(this.data.length);
          }else{
            localStorage.removeItem('data');
            this.textIndex = '完成';
          }
        },
        // 获取随机数
        rnd(m){
          return parseInt(Math.random()*m);
        }
      }
    })
  </script>
</html>